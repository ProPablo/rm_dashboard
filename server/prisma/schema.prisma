generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model artefact {
  id              Int             @id @default(autoincrement())
  name            String          @db.VarChar(255)
  description     String?         @db.VarChar(255)
  thumbnail       Bytes?
  acquisitionDate DateTime        @default(now()) @db.DateTime(0)
  coordX          Float           @default(0)
  coordY          Float           @default(0)
  createdAt       DateTime        @default(now()) @db.DateTime(6)
  updatedAt       DateTime        @default(now()) @db.DateTime(6)
  zoneId          Int?
  priority        Int             @default(-1)
  zone            zone?           @relation(fields: [zoneId], references: [id], onUpdate: NoAction, map: "FK_970b509f0a6dc3ade947130d325")
  artefact_media  artefact_media?

  @@index([zoneId], map: "FK_970b509f0a6dc3ade947130d325")
}

model artefact_media {
  id         Int                 @id @default(autoincrement())
  src        String              @unique(map: "IDX_0f164d4f3618f979ee80332823") @db.VarChar(255)
  title      String              @db.VarChar(255)
  type       artefact_media_type @default(dbgenerated("1"))
  createdAt  DateTime            @default(now()) @db.DateTime(6)
  updatedAt  DateTime            @default(now()) @db.DateTime(6)
  artefactId Int                 @unique(map: "REL_e9d90dfebf59c50502db6fe240")
  artefact   artefact            @relation(fields: [artefactId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_e9d90dfebf59c50502db6fe2402")
}

model beacon {
  id         Int      @id @default(autoincrement())
  name       String?  @db.VarChar(255)
  visits     Int      @default(0)
  macAddress String   @db.VarChar(255)
  activation Int      @default(0) @db.TinyInt
  coordX     Float    @default(0)
  coordY     Float    @default(0)
  createdAt  DateTime @default(now()) @db.DateTime(6)
  updatedAt  DateTime @default(now()) @db.DateTime(6)
  zoneId     Int?
  zone       zone?    @relation(fields: [zoneId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_6c440aa8f38786fdf3f6bdf5437")

  @@index([zoneId], map: "FK_6c440aa8f38786fdf3f6bdf5437")
}

model exhibition {
  id              Int      @id @default(autoincrement())
  name            String   @db.VarChar(255)
  description     String?  @db.VarChar(255)
  organiser       String?  @db.VarChar(255)
  priceAdult      Float    @default(0)
  priceConcession Float    @default(0)
  priceChild      Float    @default(0)
  startDate       DateTime @default(now()) @db.DateTime(0)
  finishDate      DateTime @default(now()) @db.DateTime(0)
  createdAt       DateTime @default(now()) @db.DateTime(6)
  updatedAt       DateTime @default(now()) @db.DateTime(6)
  thumbnail       Bytes?
}

model migrations {
  id        Int    @id @default(autoincrement())
  timestamp BigInt
  name      String @db.VarChar(255)
}

model store_item {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(255)
  description String?  @db.VarChar(255)
  cost        Float    @default(0)
  inStock     Int      @default(0) @db.TinyInt
  createdAt   DateTime @default(now()) @db.DateTime(6)
  updatedAt   DateTime @default(now()) @db.DateTime(6)
  thumbnail   Bytes?
}

model user {
  id       Int    @id @default(autoincrement())
  name     String @db.VarChar(255)
  email    String @unique(map: "IDX_e12875dfb3b1d92d7d7c5377e2") @db.VarChar(255)
  password String @db.VarChar(255)
}

model zone {
  id          Int        @id @default(autoincrement())
  name        String     @db.VarChar(255)
  description String?    @db.VarChar(255)
  coordX      Float      @default(0)
  coordY      Float      @default(0)
  width       Float      @default(30)
  height      Float      @default(30)
  createdAt   DateTime   @default(now()) @db.DateTime(6)
  updatedAt   DateTime   @default(now()) @db.DateTime(6)
  priority    Int        @default(-1)
  artefact    artefact[]
  beacon      beacon[]
}

enum artefact_media_type {
  // 0 @map("0")
  // 1 @map("1")
}
